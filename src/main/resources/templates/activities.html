<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="content">
    <div th:switch="${activities}" class="mt-1">
        <h4 class="mb-1 text-center">Activity Log</h4>
            <table class="table table-striped table-sm text-sm">
                <thead class="thead-dark">
                <tr>
                    <th class="col-md-3 text-center">Occurred At</th>
                    <th class="col-md-9 text-center">Event</th>
                </tr>
                </thead>
                <tbody th:case="null">
	            	<tr><td class="text-center" colspan=2>No Activities</td></tr>
	            </tbody>
	            <tbody th:case="*">
                <tr th:each="activity : ${activities}">
                	<td class="col-md-3 text-center"><span th:text="${#temporals.format(activity.occurredAt, 'yyyy-MM-dd HH:mm:ss.SSS')}"></span></td>
                    <td class="col-md-9 text-right ">
                    	<span th:if="${activity.event.contains('ACK FAILURE')}" >
					        <span class="text-danger">ACTIVITY ACK FAILURE</span>
					        [[${#strings.replace(activity.event, 'ACTIVITY ACK FAILURE', '')}]]
					    </span>
					    <span th:if="${activity.event.contains('ACK SUCCESS')}" >
					        <span class="text-success" >ACTIVITY ACK SUCCESS</span>
					        [[${#strings.replace(activity.event, 'ACTIVITY ACK SUCCESS', '')}]]
					    </span>
					    <span th:unless="${activity.event.contains('ACK FAILURE') or activity.event.contains('ACK SUCCESS')}" th:text="${activity.event}"></span>
                    </td>
                </tr>
                </tbody>
            </table>
    </div>
    
    
    <div class="border border-dark p-2 mt-3" style="max-width: 550px; margin-left: auto;">
    <span class="mb-1 text-left font-weight-bold">Legend:</span>
    <div class="d-flex align-items-center mt-1">
        <div class="me-3" style="width: 20px; height: 20px; background-color: green;"></div>
        <span class="pl-2 small">ACTIVITY ACK SUCCESS - Asynchronous Activity Creation succeed</span>
    </div>
    <div class="d-flex align-items-center mt-1">
        <div class="me-3" style="width: 20px; height: 20px; background-color: red;"></div>
        <span class="pl-2 small">ACTIVITY ACK FAIULE - Asynchronous Activity Creation fail, shall trigger Roll Back </span>
    </div>
</div>
</div>
</body>
</html>
